# User Story 3 — Enroll in a Course

---

## Use Case: Enroll in a Course

::: mermaid
sequenceDiagram
    participant Student
    participant Frontend as Blazor WASM
    participant API as Minimal API
    participant EnrollmentService
    participant DB as In-Memory DB

    Student->>Frontend: Click "Enroll" button
    Frontend->>API: POST /enrollments (with courseId)
    API->>EnrollmentService: EnrollAsync(studentId, courseId)
    EnrollmentService->>DB: Check for duplicate enrollment
    DB->>EnrollmentService: No duplicate found
    EnrollmentService->>DB: Create enrollment record
    DB->>EnrollmentService: Return enrollment
    EnrollmentService->>API: Return success
    API->>Frontend: Return confirmation
    Frontend->>Student: Show success message
:::

**User Story:** As a student, I want to enroll in courses so I can participate in them.

**Actors:** Student, System

**Description / Goal:**  
Student enrolls in a course by clicking the "Enroll" button. System validates the enrollment (no duplicates, student authenticated) and creates the enrollment record.

**Preconditions:** Student is authenticated and course exists.

**Main Flow:**  
1. Student views available courses  
2. Student selects a course to enroll  
3. Student clicks "Enroll" button  
4. System validates enrollment (no duplicates, student authenticated)  
5. System creates enrollment record in database  
6. System confirms enrollment  
7. Student sees confirmation message  

**Alternate Flows / Exceptions:**  
- Duplicate enrollment → system displays "Already enrolled" message  
- Student not authenticated → system redirects to login  
- Course not found → system displays error message  
- Database error → system displays error message  

**Postconditions:**  
- Enrollment record created  
- Student enrolled in course  
- Student can view enrollment in "My Enrollments"  

---

Detailed implementation tasks are documented in the [task catalogue](./2.1.3.1-Tasks-Enroll-in-Course.md).

---

