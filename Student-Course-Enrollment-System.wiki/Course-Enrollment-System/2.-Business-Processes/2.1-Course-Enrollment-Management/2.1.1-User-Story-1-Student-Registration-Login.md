# User Story 1 — Student Registration & Login

---

## Use Case: Student Registration

::: mermaid
sequenceDiagram
    participant Student
    participant Frontend as Blazor WASM
    participant API as Minimal API
    participant Auth as Auth Service
    participant DB as In-Memory DB

    Student->>Frontend: Navigate to Registration
    Student->>Frontend: Enter registration details
    Frontend->>API: POST /auth/register
    API->>Auth: RegisterAsync(RegisterRequest)
    Auth->>DB: Store student with hashed password
    DB->>Auth: Return student record
    Auth->>API: Return auth token
    API->>Frontend: Return auth token
    Frontend->>Student: Redirect to courses
:::

**User Story:** As a student, I want to register and log into the system so that I can securely access my course information.

**Actors:** Student, System

**Description / Goal:**  
Student creates an account by providing email, password, first name, and last name. System validates input, stores credentials securely, and issues authentication token.

**Preconditions:** Student is not already registered with the email address.

**Main Flow:**  
1. Student navigates to registration page  
2. Student enters email, password, first name, last name  
3. System validates input (email format, password strength, required fields)  
4. System checks if email already exists  
5. System hashes password  
6. System creates student account in database  
7. System returns authentication token  
8. Student is redirected to courses page  

**Alternate Flows / Exceptions:**  
- Invalid email format → system displays validation error  
- Email already exists → system alerts student  
- Weak password → system prompts for stronger password  
- Missing required fields → system highlights missing fields  

**Postconditions:**  
- Student account created  
- Student authenticated and redirected to courses  

---

## Use Case: Student Login

::: mermaid
sequenceDiagram
    participant Student
    participant Frontend as Blazor WASM
    participant API as Minimal API
    participant Auth as Auth Service
    participant DB as In-Memory DB

    Student->>Frontend: Navigate to Login
    Student->>Frontend: Enter credentials
    Frontend->>API: POST /auth/login
    API->>Auth: LoginAsync(LoginRequest)
    Auth->>DB: Find student by email
    DB->>Auth: Return student record
    Auth->>Auth: Verify password hash
    Auth->>API: Return auth token
    API->>Frontend: Return auth token
    Frontend->>Student: Grant access
:::

**User Story:** As a student, I want to log into the system so that I can access my course information.

**Actors:** Student, System

**Description / Goal:**  
Student logs in with email and password. System validates credentials and issues authentication token.

**Preconditions:** Student has registered account.

**Main Flow:**  
1. Student navigates to login page  
2. Student enters email and password  
3. System validates credentials  
4. System returns authentication token  
5. Student is granted access  

**Alternate Flows / Exceptions:**  
- Invalid credentials → system displays error message  
- Account not found → system displays error message  

**Postconditions:**  
- Student authenticated  
- Student can access protected pages  

---

Detailed implementation tasks are documented in the [task catalogue](./2.1.1.1-Tasks-Student-Registration-Login.md).

---

