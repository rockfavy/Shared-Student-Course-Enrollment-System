# Student Course Enrollment System – Front-End Integration Documentation
---

# 1. Overview

The Student Course Enrollment System front-end is implemented using **Blazor WebAssembly (.NET 8)** with:

- Razor Components for UI rendering  
- HTTP clients for API communication  
- Component-based architecture  
- Dependency injection for services  
- Authentication state management  
- Role/claim-based visibility  
- Client-side routing  

The front-end communicates with the Minimal API backend via HTTP.

---

# 2. Front-End Architecture

```text
Browser (user actions)
    ↓
Blazor WASM Component
    ↓
HTTP Client (CoursesClient, EnrollmentsClient, AuthClient)
    ↓
Minimal API Backend
    ↓
EF Core DbContext (In-Memory Database)
    ↑
Component renders final state
```

---

# 3. Front-End Integration with API

## 3.1 Component Rendering

Components render UI like this:

```razor
@page "/courses"
@inject CoursesClient CoursesClient

<h3>Available Courses</h3>

@if (courses == null)
{
    <p>Loading...</p>
}
else
{
    @foreach (var course in courses)
    {
        <CourseCard Course="course" />
    }
}
```

Components use dependency injection for API clients:

```csharp
@code {
    private List<Course> courses = new();
    
    protected override async Task OnInitializedAsync()
    {
        courses = await CoursesClient.GetCoursesAsync();
    }
}
```

---

# 4. API Communication & Data Binding

## 4.1 HTTP Client Integration

Example HTTP client:

```csharp
public class CoursesClient(HttpClient httpClient)
{
    public async Task<List<Course>> GetCoursesAsync()
    {
        return await httpClient.GetFromJsonAsync<List<Course>>("courses")
            ?? new List<Course>();
    }
    
    public async Task<Course> GetCourseAsync(Guid id)
    {
        return await httpClient.GetFromJsonAsync<Course>($"courses/{id}")
            ?? throw new Exception("Course not found");
    }
}
```

Components call clients:

```csharp
@code {
    private Course? course;
    
    [Parameter]
    public Guid CourseId { get; set; }
    
    protected override async Task OnInitializedAsync()
    {
        course = await CoursesClient.GetCourseAsync(CourseId);
    }
}
```

---

# 5. Models and Data Transfer

Models are used to transfer data from API → Component.

Example:

```csharp
public record Course(
    Guid Id,
    string Name,
    string Description,
    int Capacity
);

public record Enrollment(
    Guid Id,
    Guid StudentId,
    Guid CourseId,
    DateTime EnrolledAt,
    Course Course
);
```

---

# 6. Shared UI Components & Layout Integration

The front-end uses shared components:

- `MainLayout.razor` → header, sidebar, footer  
- `NavMenu.razor` → navigation menu  
- `LoginDisplay.razor` → authentication display  
- `CourseCard.razor` → reusable course listing template  
- `RedirectToLogin.razor` → authentication redirect  

Ensures UI consistency across modules.

---

# 7. Role & Claim-Based UI Rendering

The UI respects authorization rules.

Example: Role check

```razor
@if (context.User.IsInRole("Student"))
{
    <button @onclick="Enroll">Enroll</button>
}
```

Example: Authentication check

```razor
@if (context.User.Identity?.IsAuthenticated == true)
{
    <NavLink href="/enrollments">My Enrollments</NavLink>
}
else
{
    <NavLink href="/login">Login</NavLink>
}
```

The UI never shows actions the user cannot legally perform.

---

# 8. Authentication Integration

Authentication is configured in `Program.cs` based on the environment:

## 8.1 Local Environment

```csharp
// Uses CustomAuthenticationStateProvider with JWT Bearer tokens (symmetric key)
builder.Services.AddScoped<CustomAuthenticationStateProvider>();
builder.Services.AddScoped<AuthenticationStateProvider>(sp => sp.GetRequiredService<CustomAuthenticationStateProvider>());
```

## 8.2 Production Environment

```csharp
// Uses Entra ID (Azure AD) for authentication
// Configured via appsettings.Production.json
```

Components access authentication state (same across all environments):

```razor
@inject AuthenticationStateProvider AuthenticationStateProvider

@code {
    private AuthenticationState? authState;
    
    protected override async Task OnInitializedAsync()
    {
        authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
    }
}
```

### Environment-Specific Configuration

| Environment | Authentication Provider | Configuration File |
|-------------|------------------------|-------------------|
| Local | JWT Bearer (Symmetric Key) | `appsettings.Development.json` |
| Production | Entra ID (Azure AD) | `appsettings.Production.json` |

---

# 9. Navigation Flow Integration

Navigation is handled through Blazor routing:

- `@page "/courses"` → Courses page  
- `@page "/courses/{id:guid}"` → Course details  
- `@page "/enrollments"` → My enrollments  
- `@page "/login"` → Login page  
- `@page "/register"` → Registration page  

Links use `NavLink`:

```razor
<NavLink href="/courses">Browse Courses</NavLink>
```

Programmatic navigation:

```csharp
@inject NavigationManager Navigation

Navigation.NavigateTo("/courses");
```

---

# 10. Screen-to-Component Mapping Table

```text
Screen                        Component              Route              Client
---------------------------------------------------------------------------
Available Courses             Catalog.razor          /courses           CoursesClient
Course Details                Course.razor           /courses/{id}      CoursesClient
My Enrollments                MyEnrollments.razor    /enrollments       EnrollmentsClient
Registration                  Register.razor         /register          AuthClient
Login                         Login.razor            /login             AuthClient
Home                          Home.razor              /                  -
```

---

# 11. Validation (Front + Back)

## 11.1 Client-Side Validation

- DataAnnotations on models  
- Component-level validation  
- Form validation  

## 11.2 Server-Side Validation

API returns validation errors:

```csharp
public class CommandResult
{
    public bool Success { get; init; }
    public List<string> Errors { get; init; } = new();
}
```

Components display errors:

```razor
@if (!result.Success)
{
    @foreach (var error in result.Errors)
    {
        <div class="alert alert-danger">@error</div>
    }
}
```

---

# 12. Front-End Error Handling

## 12.1 API Error Handling

```csharp
try
{
    await EnrollmentsClient.EnrollAsync(courseId);
    // Show success message
}
catch (HttpRequestException ex)
{
    // Show error message
    errorMessage = "Failed to enroll. Please try again.";
}
```

## 12.2 Friendly UI Error Pages

- `Error.razor` → Global error page  
- Component-level error boundaries  
- Loading states  

## 12.3 Error Display

```razor
@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger">@errorMessage</div>
}
```

---

