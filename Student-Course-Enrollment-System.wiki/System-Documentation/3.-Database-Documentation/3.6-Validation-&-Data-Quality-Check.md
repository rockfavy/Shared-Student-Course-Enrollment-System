# Student Course Enrollment System - Validation & Data Quality Check
---
# 1. Overview

Validation and data quality checks ensure data integrity across the Student Course Enrollment System database.

---

# 2. Validation Layers

## 2.1 Entity-Level Validation

EF Core entity configuration:

```csharp
modelBuilder.Entity<Student>(entity =>
{
    entity.Property(e => e.Email).IsRequired().HasMaxLength(255);
    entity.Property(e => e.FirstName).IsRequired().HasMaxLength(100);
});
```

## 2.2 Application-Level Validation

API endpoint validation:

```csharp
if (string.IsNullOrWhiteSpace(request.Email))
{
    return Results.BadRequest("Email is required");
}
```

## 2.3 Database-Level Validation

- Unique constraints
- Required fields
- Foreign key constraints
- Check constraints (if applicable)

---

# 3. Data Quality Rules

## 3.1 Student Data Quality

- Email must be valid format
- Email must be unique
- Names must not be empty
- Password must meet requirements

## 3.2 Course Data Quality

- Course name must not be empty
- Description is optional but validated if provided
- Capacity must be non-negative (if applicable)

## 3.3 Enrollment Data Quality

- Student must exist
- Course must exist
- No duplicate enrollments
- Enrollment date must be valid

---

# 4. Validation Checks

## 4.1 Required Field Validation

All required fields must be validated:
- Before entity creation
- Before database save
- In API endpoints

## 4.2 Format Validation

- Email format validation
- String length validation
- Numeric range validation

## 4.3 Business Rule Validation

- Duplicate prevention
- Referential integrity
- Capacity checks (if applicable)

---

# 5. Data Quality Monitoring

## 5.1 Validation Errors

- Log validation errors
- Return clear error messages
- Track validation failure rates

## 5.2 Data Integrity Checks

- Regular integrity checks
- Foreign key validation
- Unique constraint validation

---

# 6. Error Handling

## 6.1 Validation Errors

Return appropriate error responses:

```csharp
return Results.BadRequest(new
{
    errors = new { Email = new[] { "Email is required" } }
});
```

## 6.2 Database Errors

Handle database errors gracefully:

```csharp
try
{
    await dbContext.SaveChangesAsync();
}
catch (DbUpdateException ex)
{
    // Handle database errors
}
```

---

# 7. Testing Validation

## 7.1 Unit Tests

Test validation logic:

```csharp
[Fact]
public void Register_With_Invalid_Email_Should_Fail()
{
    var request = new RegisterRequest("John", "Doe", "invalid-email", "password");
    Assert.Throws<ValidationException>(() => ValidateRequest(request));
}
```

## 7.2 Integration Tests

Test database constraints:

```csharp
[Fact]
public async Task Create_Student_With_Duplicate_Email_Should_Fail()
{
    // Test unique constraint
}
```

---

# 8. Data Quality Best Practices

## 8.1 Validate Early

- Validate at API entry point
- Validate before database operations
- Return errors immediately

## 8.2 Clear Error Messages

- Provide specific error messages
- Group errors by field
- Help users fix issues

---

