# Student Course Enrollment System - Front-End Documentation Overview
---
# 1. Overview

The Student Course Enrollment System front-end is a **Blazor WebAssembly (WASM) application** delivering all user-facing screens for students to manage their course enrollments.

It provides access to Course Enrollment features:

- Student Registration & Login  
- Course Browsing  
- Course Enrollment  
- Enrollment Management (View & Deregister)  

It also handles:

- Page routing  
- Validation  
- Navigation  
- User interactions  
- API communication via HttpClient  

The front-end integrates with:

- Minimal API backend via HTTP  
- Environment-specific authentication service:
  - **Local**: JWT Bearer with symmetric key (self-issued tokens)
  - **Production**: Entra ID (Azure AD)
- Course and Enrollment endpoints  
- Razor Components for rendering  
- JWT token-based authentication (all environments)  
- Layouts, shared components  

---

# 2. Project Structure

The front-end uses a Blazor WebAssembly folder structure following the pattern from Lesson 10.02:

```text
/Components           → Razor components (pages, shared components)
  /Pages              → Main application pages
  /Layout             → Layout components (MainLayout, NavMenu)
  /Account            → Authentication-related pages
/Authorization        → Authentication & authorization configuration
/Clients              → HTTP clients for API communication
/Models               → Data models and DTOs
/Services             → Client-side services (state management)
/wwwroot              → Static assets (CSS, JS, images)
/Properties           → Configuration files
Program.cs            → Application startup and configuration
```

---

# 3. Key Screens & Flows

The front-end implements all screens supporting the **Course Enrollment functionality**.

## 3.1 Authentication Screens

- Registration Page  
- Login Page  
- Access Denied Page  

## 3.2 Course Management Screens

- Available Courses List  
- Course Details View  

## 3.3 Enrollment Screens

- My Enrolled Courses  
- Enrollment Confirmation  
- Deregistration Confirmation  

## 3.4 Shared Screens

- Home Page  
- Navigation Menu  
- Error Page  

## 3.5 Admin Screens

- Course Management Page (Admin only) - View all courses with enrolled students

---

# 4. Front-End Integration

The Blazor WASM application communicates with the Minimal API backend via HTTP:

### API Communication via HttpClient

```csharp
public class CoursesClient(HttpClient httpClient)
{
    public async Task<CoursesPage> GetCoursesAsync()
    {
        return await httpClient.GetFromJsonAsync<CoursesPage>("courses")
            ?? new CoursesPage([]);
    }
}
```

### Components call API clients

```csharp
@inject CoursesClient CoursesClient

@code {
    private List<Course> courses = new();
    
    protected override async Task OnInitializedAsync()
    {
        courses = await CoursesClient.GetCoursesAsync();
    }
}
```

### Authentication

- **Local Environment:** JWT Bearer with symmetric key (self-issued tokens)  
- **Production Environment:** Entra ID (Azure AD)  

All environments use JWT token-based authentication, but with different token sources.  

### State Management

- Component-level state  
- Service-based state (e.g., EnrollmentState)  
- HTTP client caching (optional)  

---

# 5. State Management & Routing

### Client-side Routing (Blazor)

Routing is defined via `@page` directives:

```razor
@page "/courses"
@page "/courses/{id:guid}"
```

Navigation uses `NavigationManager`:

```csharp
NavigationManager.NavigateTo("/courses");
```

### State Management

- Component parameters  
- Dependency injection services  
- Local component state  

### Client-Side Behavior

- Full SPA navigation  
- Client-side rendering  
- No server round-trips for navigation  

---

# 6. Environment-Specific Development

## 6.1 Local Environment

Local development uses **JWT Bearer authentication with symmetric key** (self-issued tokens).

### Requirements

- .NET SDK (.NET 8)  
- Visual Studio 2022 or VS Code  
- API backend running  

### Local Workflow

1. Clone repository  
2. Run `dotnet restore`  
3. Configure API URL in `appsettings.Development.json`  
4. Press F5 to run Blazor WASM  
5. Use traditional login form (credentials validated by API)  
6. All screens render through Razor Components  

Local environment requires the API backend to be running.

## 6.2 Production Environment

Production environment uses **Entra ID (Azure AD)** for authentication.

### Requirements

- Azure AD app registration
- Production environment configuration
- Entra ID tenant setup

---

# 7. Testing

## 7.1 Automated Tests

- Component unit tests  
- API client tests  
- Form validation tests  
- Routing tests  

## 7.2 Manual Tests

- Component rendering  
- Form submission behavior  
- API integration  
- Authorization checks  
- Responsive layout tests  

## 7.3 Execution

- Visual Studio Test Explorer  
- `dotnet test`  
- Browser-based testing  

---

# 8. Recent UI Enhancements

## 8.1 Authentication Forms

### Registration Form (`Register.razor`)
- **First Name and Last Name Fields**: Registration form now requires separate First Name and Last Name fields instead of a single Name field
- **Password Visibility Toggle**: Added eye icon button to toggle password visibility (show/hide password)
  - Uses Bootstrap Icons (eye/eye-slash)
  - Toggles between `type="password"` and `type="text"`
  - Button positioned within input group for better UX

### Login Form (`Login.razor`)
- **Password Visibility Toggle**: Added eye icon button to toggle password visibility (show/hide password)
  - Consistent with registration form design
  - Uses Bootstrap Icons for visual feedback

## 8.2 User Display

### App Bar (`AppBar.razor`)
- **Name Display**: Displays user's full name (First Name + Last Name) in the top navigation bar
- **Name Formatting**: Automatically formats names with proper capitalization
- **Fallback Handling**: Handles cases where name claims may be in different formats

## 8.3 Home Page (`Home.razor`)
- **Card-Based Layout**: Redesigned with card-based navigation
- **Role-Aware Navigation**: 
  - "Available Courses" card visible to all users
  - "My Enrollments" card visible only to authenticated students
  - "Get Started" card with Login/Register buttons for unauthenticated users
- **Visual Icons**: Added Bootstrap Icons for visual cues
- **Responsive Design**: Uses Bootstrap grid for responsive layout
- **Hover Effects**: Cards have smooth hover animations

## 8.4 Admin Course Management (`AdminCoursesPage.razor`)
- **New Page**: `/admin/courses` route for admin users only
- **Course Overview**: Displays all courses that have student enrollments
- **Student Details Table**: Shows enrolled students for each course with:
  - Student name (First Name + Last Name)
  - Student email
  - Enrollment date
- **Card Layout**: Each course displayed in a card with header and body sections
- **Loading States**: Shows spinner during data loading
- **Error Handling**: Displays user-friendly error messages
- **Empty State**: Shows message when no courses with enrollments exist

## 8.5 Navigation Updates (`NavMenu.razor`)
- **Admin Link**: Added "Course Management" link visible only to Admin role users
- **Role-Based Visibility**: Navigation items shown based on user role (Student vs Admin)

## 8.6 Course Enrollment Enhancements

### Capacity Display (`CoursesPage.razor`)
- **Enrollment Count Display**: Course list now shows current enrollments vs capacity (e.g., "5 / 10")
- **Full Course Indicator**: Displays "Full" badge when course has reached capacity
- **Enroll Button State**: Enroll button is disabled and replaced with "Full" text when course is at capacity
- **Real-Time Updates**: Enrollment count updates automatically after enrollments/deregistrations

### Capacity Validation
- **Frontend Validation**: Course edit modal shows current enrollment count and prevents setting capacity below current enrollments
- **Visual Feedback**: Edit form displays alert showing current enrollments and enforces minimum capacity value
- **Clear Error Messages**: Validation errors clearly indicate why capacity cannot be reduced

## 8.7 Authentication & Error Handling

### JWT Token Expiration Handling
- **Automatic Detection**: System automatically detects expired JWT tokens (401 Unauthorized responses)
- **User-Friendly Messages**: Displays clear message: "Your session has expired. Please log in again"
- **Automatic Redirect**: Automatically redirects users to login page when token expires
- **State Management**: Clears authentication state and stored tokens on expiration

### Error Message Improvements
- **User-Friendly Messages**: All error messages are now user-friendly and actionable
- **Network Errors**: Network timeouts show: "Please check your internet connection and try again"
- **Validation Errors**: Clear, field-specific validation messages
- **Authorization Errors**: Clear messages for permission issues
- **Consistent Format**: All error messages follow consistent format across the application

## 8.8 UI/UX Improvements

### Loading Overlays
- **Full-Screen Loading**: Implemented on Courses and Enrollments pages to prevent flickering during state transitions
- **Smooth Transitions**: Loading overlay hides content during page initialization and state changes

### Error Message Display
- **Dismissible Alerts**: Success and error messages displayed as dismissible Bootstrap alerts
- **Non-Blocking**: Messages appear at top of page without hiding main content
- **Clear Dismissal**: Users can close alerts with X button

### Modal Dialogs
- **Bootstrap Modals**: Replaced JavaScript `confirm()` alerts with proper Bootstrap modals
- **Delete Confirmations**: Course deletion and enrollment deregistration use modal dialogs
- **Better UX**: More professional and accessible than browser alerts

---


