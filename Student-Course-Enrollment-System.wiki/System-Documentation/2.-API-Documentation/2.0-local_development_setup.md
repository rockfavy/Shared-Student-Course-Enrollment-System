# Student Course Enrollment System – API Local Environment Setup Guide
---
# 1. Overview

Setup instructions for preparing, configuring, and running the Minimal API backend locally. Covers required tools, configurations, database setup, authentication configuration, and solution structure.

---

# 2. Workstation Requirements

## 2.1 Operating System
- Windows 10 or later  
- Administrator rights for installing development tools and trusting HTTPS certificates  

## 2.2 Hardware Minimum
- 8 GB RAM (16 GB recommended)  
- Quad-core CPU  
- 20+ GB SSD space  

---

# 3. Required Development Tools

## 3.1 Visual Studio 2022
Install **Visual Studio 2022 Community / Professional / Enterprise** with these workloads:

- **ASP.NET and Web Development**  
- **.NET Desktop Development** (optional but useful)

### Recommended IDE Configuration
- Enable **Roslyn analyzers**  
- Enable **Full Solution Analysis**  
- Apply consistent formatting conventions  
- Recommended extensions:
  - GitHub / Azure DevOps integration  
  - NuGet Package Manager Extensions  

---

## 3.2 .NET SDK
Install the .NET SDK matching the project target (e.g., **.NET 8 LTS**).

Verify installation:

```bash
dotnet --version
```

---

## 3.3 Git
Install Git, then configure identity:

```bash
git config --global user.name "Your Name"
git config --global user.email "you@example.com"
git config --global core.autocrlf true
git config --global color.ui auto
```

Clone the repository:

```bash
git clone <repo-url>
```

### Branching Strategy
- **main** → Production  
- **feature** → Triggers production pipeline  
- **userstory** → Individual development work  
- **task** → Task-level development work  

---

# 4. Database Setup

The API uses an **in-memory database** for local development.

## 4.1 In-Memory Database Configuration

The database is configured in `Program.cs`:

```csharp
builder.Services.AddDbContext<EnrollmentContext>(options =>
    options.UseInMemoryDatabase("EnrollmentDb"));
```

## 4.2 Database Initialization

Seed data can be initialized on application startup:

```csharp
await app.InitializeDbAsync();
```

---

# 5. Authentication Setup (Local API)

Local environment uses **JWT Bearer authentication with symmetric key**:

- Symmetric key validation for token signing and verification
- JWT token-based authentication
- No external identity provider required
- Tokens include user claims (NameIdentifier, Email, Name, Role)

### Requirements
- JWT Bearer configured in `appsettings.Development.json`
- Secret key for token signing (minimum 32 characters)
- Tokens/claims configured for testing

### Environment-Specific Authentication

| Environment | Authentication Provider |
|-------------|------------------------|
| Local | JWT Bearer (Symmetric Key) |
| Production | Microsoft Entra ID |

### Production Environment Authentication
- Uses **Entra ID (Azure AD)**
- Configured via `appsettings.Production.json`
- Requires Azure AD app registration

---

# 6. Repository Structure & Solution Setup

1. Clone the repository  
2. Open `StudentCourseEnrollment.sln` in Visual Studio  
3. Set `StudentCourseEnrollment.Api` as the **Startup Project**  
4. Ensure build configuration is **Debug**  
5. Ensure:

```ini
ASPNETCORE_ENVIRONMENT=Development
```

### Expected API Solution Structure

```bash
/src
  /StudentCourseEnrollment.Api
  /StudentCourseEnrollment.Shared
/tests
  /Unit
  /Integration
```

---

# 7. Application Configuration

## 7.1 launchSettings.json
Ensure development profile exists:

```json
{
  "profiles": {
    "StudentCourseEnrollment.Api": {
      "commandName": "Project",
      "launchBrowser": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      },
      "applicationUrl": "https://localhost:7001"
    }
  }
}
```

## 7.2 Restore Dependencies

```bash
dotnet restore
```

## 7.3 Build & Run the API

### CLI
```bash
dotnet build
dotnet run
```

### Visual Studio
- **F5** → Debug  
- **Ctrl+F5** → Run without debugging  

---

# 8. Local Database Initialization

The in-memory database is initialized:

- Automatically on application startup, **or**  
- Via project-provided initialization routines  

Developers must ensure:

- Database is seeded with test data  
- Initialization runs successfully  

---

# 9. Local SSL & Certificate Trust

On first run, Visual Studio will:

1. Install the development HTTPS certificate  
2. Present a Windows trust dialog  

You must approve both.


---

# 10. First-Run Checklist

Before starting API development, verify:

✔ Visual Studio 2022 installed  
✔ .NET SDK installed  
✔ Repository cloned  
✔ Correct branch checked out (e.g., `userstory` or `task`)  
✔ Local authentication configured  
✔ `appsettings.Development.json` valid  
✔ Startup project set to `StudentCourseEnrollment.Api`  
✔ NuGet dependencies restored  
✔ `ASPNETCORE_ENVIRONMENT=Development`  
✔ Database initialization runs successfully  

---


