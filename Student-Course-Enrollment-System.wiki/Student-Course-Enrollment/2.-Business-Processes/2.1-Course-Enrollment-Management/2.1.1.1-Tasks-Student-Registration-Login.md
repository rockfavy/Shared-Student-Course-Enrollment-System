# Student Registration & Login â€“ Task Catalogue
---

## Task 1: Create Blazor WASM UI pages for Registration & Login

**Description:**  
- **Front-End:** Create `RegisterPage.razor` and `LoginPage.razor` components with form inputs for email, password, first name, last name (registration), and email/password (login). Add client-side validation and error handling.  
- **Back-End:** N/A  
- **Database:** N/A  
- **Infrastructure:** N/A

### Class Diagram

::: mermaid
classDiagram
    class RegisterPage {
        +RegisterRequest Model
        +OnSubmitAsync()
        +NavigateToLogin()
        +ValidateForm()
    }
    
    class LoginPage {
        +LoginRequest Model
        +OnSubmitAsync()
        +NavigateToRegister()
        +ValidateForm()
    }
    
    RegisterPage --> AuthClient
    LoginPage --> AuthClient
:::

---

## Task 2: Implement Authentication service

**Description:**  
- **Front-End:** Create `AuthClient` service that wraps HTTP calls to authentication endpoints. Implement `RegisterAsync()` and `LoginAsync()` methods.  
- **Back-End:** N/A  
- **Database:** N/A  
- **Infrastructure:** N/A

### Class Diagram

::: mermaid
classDiagram
    class AuthClient {
        +HttpClient httpClient
        +RegisterAsync(RegisterRequest) Task~AuthResult~
        +LoginAsync(LoginRequest) Task~AuthResult~
    }
    
    class RegisterRequest {
        +string Email
        +string Password
        +string FirstName
        +string LastName
    }
    
    class LoginRequest {
        +string Email
        +string Password
    }
    
    class AuthResult {
        +bool Success
        +string Token
        +string ErrorMessage
    }
    
    AuthClient --> RegisterRequest
    AuthClient --> LoginRequest
    AuthClient --> AuthResult
:::

---

## Task 3: Configure protected routes in Blazor

**Description:**  
- **Front-End:** Configure `AuthorizeRouteView` and `CascadingAuthenticationState` in `App.razor`. Add `[Authorize]` attribute to protected pages. Implement redirect to login for unauthorized access.  
- **Back-End:** N/A  
- **Database:** N/A  
- **Infrastructure:** N/A

### Class Diagram

::: mermaid
classDiagram
    class App {
        +Router Router
        +CascadingAuthenticationState AuthState
    }
    
    class AuthorizeRouteView {
        +RouteData RouteData
        +RenderAuthorized()
        +RenderNotAuthorized()
    }
    
    class RedirectToLogin {
        +NavigateToLogin()
    }
    
    App --> AuthorizeRouteView
    AuthorizeRouteView --> RedirectToLogin
:::

---

## Task 4: Create API endpoints for user registration & login

**Description:**  
- **Front-End:** N/A  
- **Back-End:** Create `AuthEndpoints.cs` with `MapAuthEndpoints()` extension method. Implement `POST /auth/register` and `POST /auth/login` endpoints. Add request/response DTOs.  
- **Database:** N/A  
- **Infrastructure:** N/A

### Class Diagram

::: mermaid
classDiagram
    class AuthEndpoints {
        +MapAuthEndpoints(WebApplication app)
        +RegisterEndpoint(HttpContext, RegisterRequest, AuthService)
        +LoginEndpoint(HttpContext, LoginRequest, AuthService)
    }
    
    class AuthService {
        +RegisterAsync(RegisterRequest) Task~AuthResult~
        +LoginAsync(LoginRequest) Task~AuthResult~
        +ValidateCredentials(string, string) Task~bool~
    }
    
    AuthEndpoints --> AuthService
    AuthService --> EnrollmentContext
:::

---

## Task 5: Store users in an in-memory database

**Description:**  
- **Front-End:** N/A  
- **Back-End:** Configure `Student` entity in `EnrollmentContext`. Implement password hashing (BCrypt). Add `Student` to `DbSet` and configure entity relationships.  
- **Database:** Create `Student` entity with Id, Email, PasswordHash, FirstName, LastName, CreatedAt. Configure unique constraint on Email.  
- **Infrastructure:** N/A

### Class Diagram

::: mermaid
classDiagram
    class EnrollmentContext {
        +DbSet~Student~ Students
        +OnModelCreating(ModelBuilder)
    }
    
    class Student {
        +Guid Id
        +string Email
        +string PasswordHash
        +string FirstName
        +string LastName
        +DateTime CreatedAt
        +ICollection~Enrollment~ Enrollments
    }
    
    class AuthService {
        +RegisterAsync(RegisterRequest) Task~AuthResult~
        +HashPassword(string) string
    }
    
    EnrollmentContext --> Student
    AuthService --> EnrollmentContext
:::

### Entity Diagram

::: mermaid
erDiagram
    Student {
        Guid Id PK
        string Email UK
        string PasswordHash
        string FirstName
        string LastName
        DateTime CreatedAt
    }
:::

---

## Task 6: Validate login state across pages

**Description:**  
- **Front-End:** Implement `AuthenticationStateProvider` wrapper. Store JWT token in browser storage. Add token to HTTP requests via `AuthorizationHandler`. Create `AuthorizeView` components for conditional rendering.  
- **Back-End:** N/A  
- **Database:** N/A  
- **Infrastructure:** N/A

### Class Diagram

::: mermaid
classDiagram
    class AuthenticationStateProvider {
        +GetAuthenticationStateAsync() Task~AuthenticationState~
        +NotifyUserAuthenticationChanged()
    }
    
    class AuthorizationHandler {
        +HttpClient httpClient
        +SendAsync(HttpRequestMessage) Task~HttpResponseMessage~
    }
    
    class AuthorizeView {
        +RenderAuthorized()
        +RenderNotAuthorized()
    }
    
    AuthenticationStateProvider --> AuthorizationHandler
    AuthorizeView --> AuthenticationStateProvider
:::

---

